{"version":3,"sources":["Torch.js","App.js","reportWebVitals.js","index.js"],"names":["Torch","SUPPORTS_MEDIA_DEVICES","navigator","useState","mediaDevices","enumerateDevices","then","devices","cameras","filter","device","kind","length","camera","getUserMedia","video","deviceId","facingMode","height","ideal","width","stream","track","getVideoTracks","ImageCapture","getPhotoCapabilities","document","querySelector","addEventListener","applyConstraints","advanced","torch","className","App","streamRef","useRef","error","setError","data","setData","useTorchLight","current","onLoad","onScan","onError","style","JSON","stringify","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"qNAsFeA,MApFf,WAEE,IAAMC,EAAyB,iBAAkBC,UAFlC,EAGSC,oBAAS,GAHlB,mBA6Ef,OA7Ee,UAKXF,GAEFC,UAAUE,aAAaC,mBAAmBC,MAAK,SAACC,GAC9C,IAAMC,EAAUD,EAAQE,QAAO,SAACC,GAAD,MAA4B,eAAhBA,EAAOC,QAElD,GAAuB,IAAnBH,EAAQI,OACV,KAAM,kCAER,IAAMC,EAASL,EAAQA,EAAQI,OAAS,GAGxCV,UAAUE,aACPU,aAAa,CACZC,MAAO,CACLC,SAAUH,EAAOG,SACjBC,WAAY,CAAC,OAAQ,eACrBC,OAAQ,CAAEC,MAAO,MACjBC,MAAO,CAAED,MAAO,SAGnBb,MAAK,SAACe,GACL,IAAMC,EAAQD,EAAOE,iBAAiB,GAGjB,IAAIC,aAAaF,GAEnCG,uBACAnB,MAAK,WAsBQoB,SAASC,cAAc,WAC/BC,iBAAiB,SAAS,WAC5BN,EAAMO,iBAAiB,CACrBC,SAAU,CAAC,CAAEC,OAAO,kBAqBlC,8BACE,wBAAQC,UAAU,SAAlB,yBC/CSC,MA7Bf,WACE,IAAMC,EAAYC,iBAAO,MADZ,EAGahC,mBAAS,MAHtB,mBAGNiC,EAHM,KAGCC,EAHD,OAIWlC,mBAAS,aAJpB,mBAINmC,EAJM,KAIAC,EAJA,OAMQC,YAAcN,EAAUO,SANhC,mBAYb,OAZa,UAaX,qCACE,cAAC,EAAD,IAEA,cAAC,IAAD,CACEC,OATS,SAAC,GAAgB,IAAdrB,EAAa,EAAbA,OAChBa,EAAUO,QAAUpB,GAShBsB,OAAQJ,EACRK,QAASP,EACTQ,MAAO,CAAEzB,MAAO,UAGlB,4BAAI0B,KAAKC,UAAUT,EAAM,KAAM,KAC/B,4BAAIQ,KAAKC,UAAUX,EAAO,KAAM,SCjBvBY,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB5C,MAAK,YAAkD,IAA/C6C,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFhC,SAASiC,eAAe,SAM1BX,M","file":"static/js/main.8f712f5f.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nfunction Torch() {\r\n  //Test browser support\r\n  const SUPPORTS_MEDIA_DEVICES = \"mediaDevices\" in navigator;\r\n  const [isOn, setIsOn] = useState(false);\r\n\r\n  if (SUPPORTS_MEDIA_DEVICES) {\r\n    //Get the environment camera (usually the second one)\r\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\r\n      const cameras = devices.filter((device) => device.kind === \"videoinput\");\r\n\r\n      if (cameras.length === 0) {\r\n        throw \"No camera found on this device.\";\r\n      }\r\n      const camera = cameras[cameras.length - 1];\r\n\r\n      // Create stream and get video track\r\n      navigator.mediaDevices\r\n        .getUserMedia({\r\n          video: {\r\n            deviceId: camera.deviceId,\r\n            facingMode: [\"user\", \"environment\"],\r\n            height: { ideal: 1080 },\r\n            width: { ideal: 1920 },\r\n          },\r\n        })\r\n        .then((stream) => {\r\n          const track = stream.getVideoTracks()[0];\r\n\r\n          //Create image capture object and get camera capabilities\r\n          const imageCapture = new ImageCapture(track);\r\n          const photoCapabilities = imageCapture\r\n            .getPhotoCapabilities()\r\n            .then(() => {\r\n              // //todo: check if camera has a torch\r\n              // // if (isOn) {\r\n              // //   //let there be light!\r\n              // //   setIsOn(false);\r\n              // //   const btn = document.querySelector(\".switch\");\r\n              // //   btn.addEventListener(\"click\", function () {\r\n              // //     track.applyConstraints({\r\n              // //       advanced: [{ torch: false }],\r\n              // //     });\r\n              // //   });\r\n              // // } else {\r\n              // //   //let there be light!\r\n              // //   setIsOn(true);\r\n              // //   const btn = document.querySelector(\".switch\");\r\n              // //   btn.addEventListener(\"click\", function () {\r\n              // //     track.applyConstraints({\r\n              // //       advanced: [{ torch: true }],\r\n              // //     });\r\n              // //   });\r\n              // // }\r\n              //let there be light!\r\n              const btn = document.querySelector(\".switch\");\r\n              btn.addEventListener(\"click\", function () {\r\n                track.applyConstraints({\r\n                  advanced: [{ torch: true }],\r\n                });\r\n              });\r\n              //todo: check if camera has a torch\r\n              // let state = false;\r\n              // //let there be light!\r\n              // const btn = document.querySelector(\".switch\");\r\n              // btn.addEventListener(\"click\", function () {\r\n              //   state = !state;\r\n              //   track.applyConstraints({\r\n              //     advanced: [{ torch: state }],\r\n              //   });\r\n              // });\r\n            });\r\n        });\r\n    });\r\n\r\n    //The light will be on as long the track exists\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <button className=\"switch\">On / Off</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Torch;\r\n","import { useRef, useState } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nimport { useTorchLight } from \"@blackbox-vision/use-torch-light\";\r\nimport Torch from \"./Torch\";\r\n\r\nfunction App() {\r\n  const streamRef = useRef(null);\r\n\r\n  const [error, setError] = useState(null);\r\n  const [data, setData] = useState(\"No result\");\r\n\r\n  const [on, toggle] = useTorchLight(streamRef.current);\r\n\r\n  const setRef = ({ stream }) => {\r\n    streamRef.current = stream;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Torch />\r\n\r\n      <QrReader\r\n        onLoad={setRef}\r\n        onScan={setData}\r\n        onError={setError}\r\n        style={{ width: \"100%\" }}\r\n      />\r\n      {/* <button onClick={toggle}>{on ? \"Disable Torch\" : \"Enable Torch\"}</button> */}\r\n      <p>{JSON.stringify(data, null, 2)}</p>\r\n      <p>{JSON.stringify(error, null, 2)}</p>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}